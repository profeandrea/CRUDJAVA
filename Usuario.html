<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Usuario.java</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
body {color: #000000; background-color: #ffffff; font-family: monospace; font-weight: bold}
pre {color: #000000; background-color: #ffffff; font-family: monospace; font-weight: bold}
table {color: #404040; background-color: #e9e8e2; font-family: monospace; font-weight: bold}
.literal {color: #336bdd}
.string {color: #1e9347}
.ST2 {color: #ce54b8; font-family: monospace; font-weight: bold; font-style: italic}
.ST0 {color: #ce54b8}
.comment {color: #990099}
.ST1 {font-family: monospace; font-weight: bold; font-style: italic}
-->
</style>
</head>
<body>
<table width="100%"><tr><td align="center">C:\Users\MINEDUCYT\Documents\NetBeansProjects\ProyectoJDBC\src\logica\Usuario.java</td></tr></table>
<pre>
 1 <span class="literal">package</span> logica;
 2 
 3 <span class="literal">import</span> java.sql.Connection;
 4 <span class="literal">import</span> java.sql.ResultSet;
 5 <span class="literal">import</span> java.sql.SQLException;
 6 <span class="literal">import</span> java.sql.PreparedStatement;
 7 
 8 <span class="literal">public</span> <span class="literal">class</span> Usuario {
 9 
10     <span class="literal">private</span> String <span class="ST0">idUsuario</span>;
11     <span class="literal">private</span> String <span class="ST0">contra</span>;
12     <span class="literal">private</span> <span class="literal">int</span> <span class="ST0">tipoUsuario</span>;
13 
14     <span class="comment">//Objetos para conexion</span>
15     <span class="literal">private</span> Connection <span class="ST0">conn</span>;
16     <span class="literal">private</span> String <span class="ST0">query</span> = <span class="string">&quot;&quot;</span>;
17     <span class="literal">private</span> ResultSet <span class="ST0">resultado</span> = <span class="literal">null</span>;
18     <span class="literal">private</span> PreparedStatement <span class="ST0">stmt</span> = <span class="literal">null</span>;
19     <span class="literal">private</span> <span class="literal">int</span> <span class="ST0">filas</span> = 0;
20 
21     <span class="literal">public</span> Usuario autenticar() {
22         Usuario u = <span class="literal">null</span>;
23         <span class="ST0">query</span> = <span class="string">&quot;</span><span class="string">SELECT * FROM usuario WHERE IDUSUARIO = ? AND CONTRA = ?</span><span class="string">&quot;</span>;
24         <span class="literal">try</span> {
25             <span class="comment">//1. conectamos</span>
26             <span class="ST0">conn</span> = Conexion.<span class="ST1">getConnection</span>();
27             <span class="comment">//2. Prepara la query, PreparedStatement</span>
28             <span class="ST0">stmt</span> = <span class="ST0">conn</span>.prepareStatement(<span class="ST0">q</span><span class="ST0">uery</span>);
29             <span class="ST0">stmt</span>.setString(1, <span class="ST0">i</span><span class="ST0">dUsuario</span>);
30             <span class="ST0">stmt</span>.setString(2, <span class="ST0">c</span><span class="ST0">ontra</span>);
31             <span class="comment">//3. Ejecutar query</span>
32             <span class="ST0">resultado</span> = <span class="ST0">stmt</span>.executeQuery();
33             <span class="literal">while</span>(<span class="ST0">resultado</span>.next()){
34                 u = <span class="literal">new</span> Usuario();
35                 u.setIdUsuario(<span class="ST0">r</span><span class="ST0">esultado</span>.getString(<span class="string">&quot;</span><span class="string">idusuario</span><span class="string">&quot;</span>));
36                 u.setContra(<span class="ST0">r</span><span class="ST0">esultado</span>.getString(<span class="string">&quot;</span><span class="string">contra</span><span class="string">&quot;</span>));
37                 u.setTipoUsuario(<span class="ST0">r</span><span class="ST0">esultado</span>.getInt(<span class="string">&quot;</span><span class="string">tipousuario</span><span class="string">&quot;</span>));
38             }
39             <span class="comment">//4. Cerrar stmt</span>
40             <span class="ST0">stmt</span>.close();
41         } <span class="literal">catch</span> (SQLException e) {
42             System.<span class="ST2">out</span>.println(<span class="string">&quot;</span><span class="string">Error al ejecutar stmt: </span><span class="string">&quot;</span> + e.getMessage());
43         }<span class="literal">finally</span>{
44             <span class="comment">//5. Cerrar conexion</span>
45             Conexion.<span class="ST1">closeConnection</span>(<span class="ST0">c</span><span class="ST0">onn</span>);
46         }
47 
48         <span class="literal">return</span> u;
49     }
50 
51     <span class="literal">public</span> <span class="literal">int</span> crearUsuario() {
52         <span class="comment">// TODO implement here</span>
53         <span class="literal">return</span> 0;
54     }
55 
56     <span class="literal">public</span> <span class="literal">int</span> modificarUsuario() {
57         <span class="comment">// TODO implement here</span>
58         <span class="literal">return</span> 0;
59     }
60 
61     <span class="literal">public</span> <span class="literal">int</span> eliminarUsuario() {
62         <span class="comment">// TODO implement here</span>
63         <span class="literal">return</span> 0;
64     }
65 
66     <span class="literal">public</span> Usuario buscarUsuario() {
67         <span class="comment">// TODO implement here</span>
68         <span class="literal">return</span> <span class="literal">null</span>;
69     }
70 
71     <span class="literal">public</span> String getIdUsuario() {
72         <span class="literal">return</span> <span class="ST0">idUsuario</span>;
73     }
74 
75     <span class="literal">public</span> <span class="literal">void</span> setIdUsuario(String idUsuario) {
76         <span class="literal">this</span>.<span class="ST0">idUsuario</span> = idUsuario;
77     }
78 
79     <span class="literal">public</span> String getContra() {
80         <span class="literal">return</span> <span class="ST0">contra</span>;
81     }
82 
83     <span class="literal">public</span> <span class="literal">void</span> setContra(String contra) {
84         <span class="literal">this</span>.<span class="ST0">contra</span> = contra;
85     }
86 
87     <span class="literal">public</span> <span class="literal">int</span> getTipoUsuario() {
88         <span class="literal">return</span> <span class="ST0">tipoUsuario</span>;
89     }
90 
91     <span class="literal">public</span> <span class="literal">void</span> setTipoUsuario(<span class="literal">int</span> tipoUsuario) {
92         <span class="literal">this</span>.<span class="ST0">tipoUsuario</span> = tipoUsuario;
93     }
94 
95 }
96 
</pre></body>
</html>
